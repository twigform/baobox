import { writable } from 'svelte/store';

export const materialLight = {
    base: '#ffffff',
    mantle: '#f5f5f5',
    crust: '#e0e0e0',
    text: '#212121',
    subtext: '#757575',
    overlay: '#9e9e9e',
    surface0: '#eeeeee',
    surface1: '#e0e0e0',
    surface2: '#bdbdbd',
    blue: '#2196f3',
    lavender: '#7e57c2',
    sapphire: '#00bcd4',
    green: '#4caf50',
    yellow: '#ffeb3b',
    peach: '#ff9800',
    red: '#f44336',
    maroon: '#e91e63',
    pink: '#e91e63',
    flamingo: '#ff5722',
    rosewater: '#ff8a80',
};

export const materialDark = {
    base: '#121212',
    mantle: '#1e1e1e',
    crust: '#242424',
    text: '#ffffff',
    subtext: '#b0b0b0',
    overlay: '#5c5c5c',
    surface0: '#2c2c2c',
    surface1: '#363636',
    surface2: '#404040',
    blue: '#64b5f6',
    lavender: '#b39ddb',
    sapphire: '#4dd0e1',
    green: '#81c784',
    yellow: '#fff176',
    peach: '#ffb74d',
    red: '#e57373',
    maroon: '#f06292',
    pink: '#f06292',
    flamingo: '#ff8a65',
    rosewater: '#ffab91',
};

export const catppuccinMocha = {
    base: '#1e1e2e',
    mantle: '#181825',
    crust: '#11111b',
    text: '#cdd6f4',
    subtext: '#a6adc8',
    overlay: '#6c7086',
    surface0: '#313244',
    surface1: '#45475a',
    surface2: '#585b70',
    blue: '#89b4fa',
    lavender: '#b4befe',
    sapphire: '#74c7ec',
    green: '#a6e3a1',
    yellow: '#f9e2af',
    peach: '#fab387',
    red: '#f38ba8',
    maroon: '#eba0ac',
    pink: '#f5c2e7',
    flamingo: '#f2cdcd',
    rosewater: '#f5e0dc',
};

export const gruvbox = {
    base: '#282828',
    mantle: '#1d2021',
    crust: '#1b1b1b',
    text: '#ebdbb2',
    subtext: '#a89984',
    overlay: '#928374',
    surface0: '#32302f',
    surface1: '#3c3836',
    surface2: '#504945',
    blue: '#83a598',
    lavender: '#d3869b',
    sapphire: '#458588',
    green: '#b8bb26',
    yellow: '#fabd2f',
    peach: '#fe8019',
    red: '#fb4934',
    maroon: '#cc241d',
    pink: '#d3869b',
    flamingo: '#fe8019',
    rosewater: '#ebdbb2',
};

export const catppuccinLatte = {
    base: '#eff1f5',
    mantle: '#e6e9ef',
    crust: '#dce0e8',
    text: '#4c4f69',
    subtext: '#5c5f77',
    overlay: '#6c6f85',
    surface0: '#ccd0da',
    surface1: '#bcc0cc',
    surface2: '#acb0be',
    blue: '#1e66f5',
    lavender: '#7287fd',
    sapphire: '#209fb5',
    green: '#40a02b',
    yellow: '#df8e1d',
    peach: '#fe640b',
    red: '#d20f39',
    maroon: '#e64553',
    pink: '#ea76cb',
    flamingo: '#dd7878',
    rosewater: '#dc8a78',
};

export const dracula = {
    base: '#282a36',
    mantle: '#1e1f29',
    crust: '#191a21',
    text: '#f8f8f2',
    subtext: '#6272a4',
    overlay: '#44475a',
    surface0: '#343746',
    surface1: '#44475a',
    surface2: '#4d5066',
    blue: '#6272a4',
    lavender: '#bd93f9',
    sapphire: '#8be9fd',
    green: '#50fa7b',
    yellow: '#f1fa8c',
    peach: '#ffb86c',
    red: '#ff5555',
    maroon: '#ff79c6',
    pink: '#ff79c6',
    flamingo: '#ffb86c',
    rosewater: '#ffb86c',
};

export const nord = {
    base: '#2e3440',
    mantle: '#3b4252',
    crust: '#434c5e',
    text: '#eceff4',
    subtext: '#d8dee9',
    overlay: '#4c566a',
    surface0: '#434c5e',
    surface1: '#4c566a',
    surface2: '#5e81ac',
    blue: '#81a1c1',
    lavender: '#b48ead',
    sapphire: '#88c0d0',
    green: '#a3be8c',
    yellow: '#ebcb8b',
    peach: '#d08770',
    red: '#bf616a',
    maroon: '#c35b65',
    pink: '#b48ead',
    flamingo: '#d08770',
    rosewater: '#e5e9f0',
};

export const solarizedDark = {
    base: '#002b36',
    mantle: '#073642',
    crust: '#01313f',
    text: '#fdf6e3',
    subtext: '#eee8d5',
    overlay: '#586e75',
    surface0: '#073642',
    surface1: '#586e75',
    surface2: '#657b83',
    blue: '#268bd2',
    lavender: '#6c71c4',
    sapphire: '#2aa198',
    green: '#859900',
    yellow: '#b58900',
    peach: '#cb4b16',
    red: '#dc322f',
    maroon: '#d33682',
    pink: '#d33682',
    flamingo: '#cb4b16',
    rosewater: '#fdf6e3',
};

export const tokyoNight = {
    base: '#1a1b26',
    mantle: '#16161e',
    crust: '#13131a',
    text: '#a9b1d6',
    subtext: '#787c99',
    overlay: '#565f89',
    surface0: '#232433',
    surface1: '#2a2b3d',
    surface2: '#343a52',
    blue: '#7aa2f7',
    lavender: '#bb9af7',
    sapphire: '#7dcfff',
    green: '#9ece6a',
    yellow: '#e0af68',
    peach: '#ff9e64',
    red: '#f7768e',
    maroon: '#db4b4b',
    pink: '#ff007c',
    flamingo: '#ff9e64',
    rosewater: '#e0af68',
};

export const oneDark = {
    base: '#282c34',
    mantle: '#21252b',
    crust: '#1b1f23',
    text: '#abb2bf',
    subtext: '#828997',
    overlay: '#5c6370',
    surface0: '#31353f',
    surface1: '#393f4a',
    surface2: '#4b5263',
    blue: '#61afef',
    lavender: '#c678dd',
    sapphire: '#56b6c2',
    green: '#98c379',
    yellow: '#e5c07b',
    peach: '#d19a66',
    red: '#e06c75',
    maroon: '#be5046',
    pink: '#c678dd',
    flamingo: '#d19a66',
    rosewater: '#e06c75',
};

export const blurple = {
    base: '#1e2030',
    mantle: '#181926',
    crust: '#11121d',
    text: '#c8d3f5',
    subtext: '#a9b8e8',
    overlay: '#7a88cf',
    surface0: '#222436',
    surface1: '#2f334d',
    surface2: '#3b3f5c',
    blue: '#5865F2',
    lavender: '#9089fc',
    sapphire: '#7289da',
    green: '#3ba55c',
    yellow: '#faa61a',
    peach: '#ed4245',
    red: '#f04747',
    maroon: '#eb459e',
    pink: '#ff73fa',
    flamingo: '#ff6b6b',
    rosewater: '#f0b3ff',
};

export const rosePine = {
    base: '#191724',
    mantle: '#1f1d2e',
    crust: '#26233a',
    text: '#e0def4',
    subtext: '#908caa',
    overlay: '#6e6a86',
    surface0: '#2a2837',
    surface1: '#403d52',
    surface2: '#524f67',
    blue: '#31748f',
    lavender: '#907aa9',
    sapphire: '#9ccfd8',
    green: '#9ccfd8',
    yellow: '#f6c177',
    peach: '#ebbcba',
    red: '#eb6f92',
    maroon: '#d7827e',
    pink: '#c4a7e7',
    flamingo: '#ebbcba',
    rosewater: '#f2e9e1',
};

export const ayu = {
    base: '#0B0E14',
    mantle: '#1a1f29',
    crust: '#0d1017',
    text: '#B3B1AD',
    subtext: '#828994',
    overlay: '#3D424D',
    surface0: '#151a1e',
    surface1: '#1f242b',
    surface2: '#272d35',
    blue: '#39BAE6',
    lavender: '#A37ACC',
    sapphire: '#59c2ff',
    green: '#AAD94C',
    yellow: '#FFB454',
    peach: '#FF8F40',
    red: '#FF3333',
    maroon: '#F07178',
    pink: '#E6B673',
    flamingo: '#FFA759',
    rosewater: '#FFE6B3',
};

export const panda = {
    base: '#1D1F21',
    mantle: '#242526',
    crust: '#292A2B',
    text: '#E6E6E6',
    subtext: '#676B79',
    overlay: '#3E4249',
    surface0: '#242526',
    surface1: '#2a2c2d',
    surface2: '#303334',
    blue: '#45A9F9',
    lavender: '#B084EB',
    sapphire: '#19f9d8',
    green: '#19f9d8',
    yellow: '#FFB86C',
    peach: '#FF4B82',
    red: '#FF2C6D',
    maroon: '#FF75B5',
    pink: '#FF9AC1',
    flamingo: '#FF75B5',
    rosewater: '#FFBBD6',
};

export const andromeda = {
    base: '#23262E',
    mantle: '#1C1E24',
    crust: '#13151A',
    text: '#E5E5E5',
    subtext: '#9DA5B4',
    overlay: '#5A6375',
    surface0: '#2F323C',
    surface1: '#3B3F4C',
    surface2: '#484D5B',
    blue: '#5CB3FA',
    lavender: '#D4BFFF',
    sapphire: '#26C1C9',
    green: '#26C1C9',
    yellow: '#EE64AC',
    peach: '#F66153',
    red: '#EC5F67',
    maroon: '#E86671',
    pink: '#C74DED',
    flamingo: '#FAC863',
    rosewater: '#FFC4FF',
};

export type Theme = {
    base: string;
    mantle: string;
    crust: string;
    text: string;
    subtext: string;
    overlay: string;
    surface0: string;
    surface1: string;
    surface2: string;
    blue: string;
    lavender: string;
    sapphire: string;
    green: string;
    yellow: string;
    peach: string;
    red: string;
    maroon: string;
    pink: string;
    flamingo: string;
    rosewater: string;
};

export type ThemeOption = {
    name: string;
    theme: Theme;
};

export const themes: ThemeOption[] = [
    { name: 'Material Light', theme: materialLight },
    { name: 'Material Dark', theme: materialDark },
    { name: 'Catppuccin Mocha', theme: catppuccinMocha },
    { name: 'Catppuccin Latte', theme: catppuccinLatte },
    { name: 'Gruvbox Dark', theme: gruvbox },
    { name: 'Dracula', theme: dracula },
    { name: 'Nord', theme: nord },
    { name: 'Solarized Dark', theme: solarizedDark },
    { name: 'Tokyo Night', theme: tokyoNight },
    { name: 'One Dark', theme: oneDark },
    { name: 'Blurple', theme: blurple },
    { name: 'Rose Pine', theme: rosePine },
    { name: 'Ayu', theme: ayu },
    { name: 'Panda', theme: panda },
    { name: 'Andromeda', theme: andromeda },
];

function getSavedTheme(): ThemeOption {    if (typeof localStorage !== 'undefined') {
        const savedTheme = localStorage.getItem('baobox-theme');
        if (savedTheme) {
            const theme = themes.find(t => t.name === savedTheme);
            if (theme) return theme;
        }
    }
    return themes[1]; // Default to Material Dark
}

// Create the theme store
function createThemeStore() {
    const { subscribe, set } = writable<ThemeOption>(getSavedTheme());

    return {
        subscribe,
        setTheme: (theme: ThemeOption) => {
            if (typeof localStorage !== 'undefined') {
                localStorage.setItem('baobox-theme', theme.name);
            }
            applyTheme(theme.theme);
            set(theme);
        }
    };
}

// Apply theme to document
function applyTheme(theme: Theme) {
    if (typeof document === 'undefined') return;

    // Apply CSS variables
    Object.entries(theme).forEach(([key, value]) => {
        document.documentElement.style.setProperty(`--${key}`, value);
    });

    // Set background colors
    document.documentElement.style.backgroundColor = theme.mantle;
    document.body.style.backgroundColor = theme.mantle;
}

// Export the theme store
export const currentTheme = createThemeStore();

// Initialize theme when the module loads
if (typeof window !== 'undefined') {
    const theme = getSavedTheme();
    applyTheme(theme.theme);
}
